functions: [path-validator]
rules:
  root-tags-must-have-description:
    description: "Rule 302: Tags must have a description"
    given: $.tags[*]
    severity: error
    then:
      field: description
      function: truthy
  root-tags-must-have-externalDocs:
    description: "Rule 102: Tags must have externalDocs"
    given: $.tags[*]
    severity: error
    then:
      field: externalDocs
      function: truthy
  info-x-audience-rule:
    description: "Rule 218: Info object must have a target audience specified by key x-audience"
    given: $
    severity: error
    then:
      field: info.x-audience
      function: truthy
  info-x-audience-specific-values:
    description: "Rule 219: info.x-audience value must be either internal-company or external-public"
    given: $.info
    severity: error
    then:
      field: x-audience
      function: enumeration
      functionOptions:
        values:
          - internal-company
          - external-public
  paths-should-not-have-more-than-three-sub-resources:
    description: "Rule 147: The path must not exceed 3 sub-resources"
    given: $.paths.*~
    severity: warn
    then:
      function: path-validator
      functionOptions:
        rule: 147